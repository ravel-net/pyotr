# Instruction for tableau.py

## Generate Chain

```python
# the number of nodes in physical network path
size = 10 
# the percentage of constant nodes in physical network path (the number of nodes in overlay path)
rate = 0.3 

# call gen_large_chain() to generate physical path and  virtual path
physical_path, physical_nodes, overlay_path, overlay_nodes = gen_large_chain(size=size, rate=rate)

# call gen_tableau() to generate tableau for physical path
physical_tuples, phy_self_tuples = gen_tableau(path=physical_path, overlay=overlay_nodes)

# call gen_tableau() to generate tableau for virtual path
overlay_tuples, ove_self_tuples = gen_tableau(path=overlay_path, overlay=overlay_nodes)

physical_tableau = physical_tuples + phy_self_tuples

virtual_tableau = overlay_tuples + ove_self_tuples

"""
Then store physical_tableau and virtual tableau into database.
...
"""

```

## Generate join query for tableau
```python

# Generate join query that applys q_p to T_v.
sql = convert_tableau_to_sql(physical_tableau, "Tv", overlay_nodes)

```

# Instruction for instantiate_tableau.py

`gen_mapping()` is used to generate the variable assignments generated by z3 Solver.model(). 

`instantiate_tableau()` is used to instantiate a instance for the tableau.

Example:
```python
solver = z3.Solver()
...
ans = solver.check()
if ans == unsat:
    model = solver.model()  # model is available only when the answer is unsat
    mapping = gen_mapping(model)
    instantiate_tableau("output", mapping, "instance")
```
